# JS W2 Exam Notes
## 1. ECMAScript vs. JavaScript  
- **ECMAScript** is the language specification; JavaScript is one implementation (others: JScript, ActionScript).  
- Major releases:  
  - ES6 (ES2015) – first “modern” ES, added classes, modules, arrow functions  
  - ES2016, ES2017, ES2018 – annual incremental additions  
- Engines/VMs: V8 (Chrome, Node), SpiderMonkey (Firefox), Chakra (Edge), Deno runtime.  
- Transpilation: use Babel to convert ES6+ into ES5 for older browsers (not covered here).

---

## 2. Data Types & Variables  
- **Primitive types**: `number`, `string`, `boolean`, `null`, `undefined`; **complex**: `object` (incl. arrays, functions).  
- **Declaration**:  
  - `var` – function-scoped, hoisted (initialized to `undefined`)  
  - `let` – block-scoped, not hoisted  
  - `const` – block-scoped, must initialize, can’t reassign  
- Omitting keyword ⇒ global variable (avoid this).

---

## 3. Operators & Expressions  
- **Equality**:  
  - `==` – value equality with coercion  
  - `===` – strict equality (no coercion)  
- **Arithmetic**: `+`, `-`, `*`, `/`, `%`, exponent `**`  
- **String concatenation**: `+` coerces non-strings to string  
- **typeof** returns type name string (quirk: `typeof null` → `"object"`)  
- **Unary**: `!`, `typeof`, `+` (number conversion)

---

## 4. Control Flow  
- **if / else**  
- **switch**: multi-branch, use `break` to prevent fall-through  
- **ternary**: `cond ? exprIfTrue : exprIfFalse`

---

## 5. Loops & Iteration  
- `for (init; cond; step) { … }`  
- `while (cond) { … }`  
- `do { … } while (cond)`  
- **Example**: Print pyramid of numbers increasing each row.

---

## 6. Functions  
### 6.1 Declarations & Expressions  
```js
function sum(a, b) { 
  return a + b; 
}
const multiply = function(a, b) { 
  return a * b; 
};
```

### 6.2 Arrow Functions  
- Multi-param, block body:  
  ```js
  const f = (x, y) => { 
    const r = x * y; 
    return r; 
  };
  ```  
- Single-expr implicit return:  
  ```js
  const square = n => n ** 2;
  const greet = () => "Hello";
  ```

### 6.3 Higher-Order & First-Class  
- Functions can be passed to/returned from other functions.  
- E.g., `arr.forEach(fn)`, custom:  
  ```js
  function greet(cb) { cb(); }
  greet(() => console.log("Hi"));
  ```

---

## 7. Scope & Hoisting  
- **Global**: declared outside any block or without keyword.  
- **Function-scoped**: `var` inside function; declaration hoisted to top.  
- **Block-scoped**: `let`/`const` inside `{}`; not hoisted.  
- **Hoisting**: `var` declarations are moved to top with `undefined`; function declarations fully hoisted.

---

## 8. Built-in Objects & Methods  

### 8.1 Number & String  
- `Number(x)` → converts to number (`NaN` if invalid)  
- `String(x)` → converts to string  

### 8.2 Date  
- `new Date()` → now  
- `new Date(ms)` → from epoch (Jan 1, 1970)  
- `new Date(yyyy, mm, dd[, hh, mm, ss])` (month zero-based)  
- Methods: `getFullYear()`, `getMonth()`, `getDate()`, `setFullYear(y)`

### 8.3 Array  
```js
const arr = [1,2,3];
```
- `push(val)`, `pop()`, `indexOf(val)`
- `splice(start, deleteCount[, ...items])`
- Iteration: `forEach(cb)`  
- Transformation:  
  - `map(cb)` → new array  
  - `filter(cb)` → new subarray  
  - `find(cb)` → first matching element

---

## 9. Strings & Common Exercises  
- **Unique chars**: build result if not seen before.  
- **Palindrome**: compare `s === s.split('').reverse().join('')`.  
- **Initials formatting**: split by space, uppercase first letters, join.

---

## 10. Objects & Classes  

### 10.1 Object Literal  
```js
const emp = {
  name: "John",
  id: 1001,
  swipeIn() { console.log(this.name, "in"); }
};
```

### 10.2 Access / Iterate  
- Dot/bracket access: `obj.prop` or `obj["prop"]`  
- `for (let key in obj) { … }`  
- `Object.values(obj)` returns value array  
- Destructure with rest:  
  ```js
  const { name, ...rest } = emp;
  ```

### 10.3 Classes & Inheritance  
```js
class Employee {
  constructor(id, name) { this.id = id; this.name = name; }
  swipeIn() { /*…*/ }
  static code() { /*…*/ }
}

class PartTime extends Employee {
  constructor(id, name, hours) {
    super(id, name);
    this.hours = hours;
  }
}
```

---

## 11. JSON  
- **Text format**: keys **must** be double-quoted, values valid JSON.  
- **Parse**: `JSON.parse(str)` → JS object.  
- **Stringify**: `JSON.stringify(obj)` → JSON text.  
- **Shipping example**: extract `seller.name`, `product.series`, `price`, `productId`.

---

## 12. Regular Expressions  
- **Syntax**: `/pattern/flags`  
- **Meta-chars**: `^`, `$`, `.`, `\d`, `\w`, `\s`, `[]`, `(...)`  
- **Quantifiers**: `+`, `*`, `?`, `{n}`, `{n,}`, `{n,m}`  
- **Examples**:  
  - Date `DD/MM/YYYY`: `/\d{2}\/\d{2}\/\d{4}/`  
  - Email: `/^[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)+$/`

---

## 13. Error Handling & Exceptions  
- **Error object**: properties `name`, `message`, `stack`  
- **Built-in**: `TypeError`, `RangeError`, `ReferenceError`, `SyntaxError`, `URIError`, `EvalError`, `InternalError`  
- **try / catch / finally**:  
  ```js
  try {
    // code that may throw
  } catch (e) {
    if (e instanceof TypeError) { /*…*/ }
  } finally {
    // always runs
  }
  ```  
- **throw** custom: `throw new Error("Bad input")`  
- **Propagation**: unhandled errors bubble up to caller or browser.

---

## 14. Asynchronous JavaScript  
- **setTimeout(cb, ms)** – schedules without blocking  
- **Callbacks** lead to “callback hell” when nested deeply  
- **XHR (AJAX)**:  
  ```js
  const xhr = new XMLHttpRequest();
  xhr.open("GET", "places.json");
  xhr.onload = () => display(xhr.responseText);
  xhr.send();
  ```  
- **Demo pets.json**: fetch and render array of `{ animal, name }`

---

## 15. Promises & Async/Await  
### 15.1 Promises  
```js
function getTrip(loc) {
  return new Promise((resolve, reject) => {
    if (loc === "ooty") resolve("Trip to ooty");
    else reject(new Error("Invalid location"));
  });
}
```
- **then** handles resolve, second arg or `.catch` handles reject  
- **Chaining**: return next promise in first `then`  
- **Example**:  
  ```js
  getFlight().then(price => bookHotel(price))
             .then(total => console.log(total))
             .catch(err => console.error(err));
  ```

### 15.2 Async/Await  
- Mark function `async`  
- Use `await` before promise to get resolved value  
- Wrap in `try/catch` for errors  
  ```js
  async function getTotal() {
    try {
      const flightPrice = await bookFlight();
      const total = await bookHotel(flightPrice);
      console.log(total);
    } catch (e) {
      console.error(e);
    }
  }
  ```

---

## 16. Testing with Jasmine & Karma  
- **describe** defines test suite  
- **it** defines a spec (test case)  
- **expect** + matcher (e.g. `toEqual`, `toBeDefined`)  
- Install: `npm install -g jasmine-core karma`  
- Configure `karma.conf.js`, run `karma start`

---

## 17. DOM & Events  
### 17.1 DOM Selection & Manipulation  
- Select: `document.getElementById()`, `querySelector()`  
- Properties: `innerHTML`, `innerText`, `value`, `checked`, `disabled`  
- Methods: `createElement()`, `appendChild()`, `removeChild()`

### 17.2 Events  
- Attach: inline `onclick="fn(event)"` or `element.addEventListener("click", fn)`  
- **Event object**: `event.target` reference  
- **Prevent default**: `event.preventDefault()` (e.g. stop form submit)  
- **Stop propagation**: `event.stopPropagation()`  

### 17.3 Form Validation Example  
- Read `input.value`, validate, set error text, call `preventDefault()` to block submit.